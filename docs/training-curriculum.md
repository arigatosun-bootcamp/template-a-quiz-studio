# JapanMaster 3日間研修カリキュラム

## 研修概要

| 項目 | 内容 |
|------|------|
| 対象者 | プログラミング未経験者 |
| 期間 | 3日間（1日6時間 × 3日 = 合計18時間、実働15時間） |
| 時間 | 9:00〜16:00（昼休憩 12:00〜13:00） |
| 形式 | ハイブリッド（講師説明 + 自習） |
| 成果物 | JapanMasterアプリ（全9画面）のVercelデプロイ |

## 研修で身につけること

1. **開発フロー** — Issue → Branch → 実装 → PR → Merge のサイクルを体で覚える
2. **設計思考** — 要件定義書を読み、何を作るか理解してからコードに落とす力
3. **AIとの協働** — Claude Codeに的確な指示を出してアプリを構築する力

## 全体の進め方

各機能の実装は以下のサイクルで進めます。研修を通じてこの流れを繰り返し体験します。

```
1. 要件を読む　　→ 要件定義書で「何を作るか」を理解する
2. Issueを作る　　→ GitHubにタスクを登録する
3. ブランチを切る → git checkout -b feat/issue-XX-機能名
4. Claude Codeで実装 → AIに指示して機能を作る
5. 動作確認　　　→ ブラウザで実際に動かす
6. PRを出す　　　→ gh pr create でレビュー依頼
7. マージ　　　　→ mainブランチに統合する
```

---

## Day 1: 理解する & 基盤を作る

**テーマ：要件を理解し、開発環境と認証基盤を構築する**

### 午前（9:00〜12:00）

| 時間 | 内容 | 形式 | 詳細 |
|------|------|------|------|
| 9:00〜9:30 | オリエンテーション + 環境確認 | 講師説明 | 研修の目的・進め方の説明、開発環境（Node.js / Git / Claude Code / VS Code）の動作確認 |
| 9:30〜10:00 | 要件定義書の読み解き | 講師説明 | `docs/requirements.md` を一緒に読む。全9画面の概要、技術スタック、クイズの基本仕様を把握する |
| 10:00〜11:30 | Logic Gate（L1 / L2 / L3） | 自習 | 受講者が自分の手で記入する（LLM使用禁止）。詳細は後述 |
| 11:30〜12:00 | Git/GitHub 基礎 | 講師説明 | ブランチ・コミット・PRの概念、`git checkout -b`、`git add`、`git commit`、`gh pr create` の基本操作 |

#### Logic Gate の進め方（10:00〜11:30）

Logic Gateは「要件を自分の言葉で整理する」訓練です。Claude Codeなどの LLM は使わず、自分の頭で考えて記入します。

| ステップ | ファイル | やること | 目安時間 |
|----------|----------|----------|----------|
| L1 要件分解 | `docs/logic-gate/L1_requirements.md` | アプリの目的、やること/やらないこと、使い方の流れ、保存するデータ、完了条件を自分の言葉で書く | 30分 |
| L2 品質チェック | `docs/logic-gate/L2_validation.md` | 「空欄で送信できない」「未ログインで閲覧できない」など、守るべきルールを8行以上書く | 30分 |
| L3 テスト計画 | `docs/logic-gate/L3_testplan.md` | 正常・異常・境界のテストケースを12件以上書く。「何をする→どうなれば正解→なぜ必要」の形式 | 30分 |

> **講師へ：** Logic Gate は答えを教えず、「〜についてはどう考えますか？」のように考えを促してください。形式・用語の質問にはそのまま回答してOKです。

### 午後（13:00〜16:00）

| 時間 | 内容 | 形式 | 詳細 |
|------|------|------|------|
| 13:00〜13:30 | Issue作成の練習 | 自習 | 最初のIssueを自分でGitHub上に作成する。タイトル・説明・受け入れ条件の書き方を体験する |
| 13:30〜14:30 | DB設計 + Supabase環境構築 | Claude Code実装 | Supabaseプロジェクト作成、テーブル作成（users / quizzes / answers / quiz_sessions / prefecture_progress）、認証設定 |
| 14:30〜16:00 | 認証機能の実装 | Claude Code実装 | ログイン画面・新規登録画面・パスワードリセット画面の3画面を実装する |

#### 認証機能で実装する内容（要件定義書 §3, §6.2 対応）

- **ログイン画面：** メールアドレス＆パスワードの入力フォーム、「ログイン」ボタン（朱色）、「Googleでログイン」ボタン、「パスワードを忘れた方はこちら」リンク、「新規登録はこちら」リンク
- **新規登録画面：** メール＆パスワード＆確認入力、利用規約同意チェックボックス、「新規登録」ボタン（朱色）、「Googleで登録」ボタン、確認メール送信フロー
- **パスワードリセット画面：** メールアドレス入力→リセットメール送信→再設定
- **セキュリティ：** パスワード8文字以上、ログイン5回失敗で30分ロック、セッション有効期限7日

### Day 1 チェックリスト

受講者は以下の項目をすべて確認し、できたものにチェックを入れます。

#### フロー確認（開発ワークフローの習得）

- [ ] GitHubにIssueを1つ以上作成した
- [ ] `feat/issue-XX-機能名` の命名規則でブランチを作成した
- [ ] `feat:` や `docs:` などのプレフィックス付きでコミットした
- [ ] `gh pr create` でPRを作成した
- [ ] PRをmainブランチにマージした

#### 動作確認（認証機能が動く）

- [ ] ログイン画面が表示される（メール入力欄・PW入力欄・ログインボタン・Googleログインボタンがある）
- [ ] 新規登録画面が表示される（メール・PW・PW確認・利用規約チェックがある）
- [ ] 新規登録でアカウントを作成できる
- [ ] 作成したアカウントでログインできる
- [ ] ログイン後にトップ画面（まだ空でもよい）に遷移する
- [ ] ログアウトするとログイン画面に戻る
- [ ] パスワードリセット画面からリセットメールを送信できる

#### 設計確認（Logic Gateの記入）

- [ ] L1（要件分解）の全項目を自分の言葉で記入した
- [ ] L2（品質チェック）にルールを8行以上記入した
- [ ] L3（テスト計画）にテストケースを12件以上記入した

---

## Day 2: コア機能を作る

**テーマ：クイズの生成・出題・回答・結果表示の一連のフローを構築する**

### 午前（9:00〜12:00）

| 時間 | 内容 | 形式 | 詳細 |
|------|------|------|------|
| 9:00〜9:15 | Day 1 振り返り | 講師説明 | Day 1 チェックリストの確認、質疑応答 |
| 9:15〜9:45 | API設計の考え方 | 講師説明 | API（Application Programming Interface）とは何か、クライアントとサーバーの役割分担、Claude APIの仕組みを解説 |
| 9:45〜11:00 | Claude API連携 + クイズ生成API | Claude Code実装 | Claude APIとの接続、クイズ生成APIルートの作成、構造化レスポンス（JSON）のバリデーション、リトライ処理（最大3回） |
| 11:00〜12:00 | トップ画面の実装 | Claude Code実装 | ジャンル選択→難易度選択→スタートボタンのステップ形式UIを構築する |

#### Claude API連携で実装する内容（要件定義書 §4.1〜§4.4 対応）

- 1回のゲームで5問を一括生成する
- ユーザーの回答履歴から未正解の都道府県を抽出し、ランダムに5県を選出（全県正解済みの場合は全47県からランダム）
- 5問 = 5県（すべて別の県）で出題する
- AIが返すデータ：問題文、選択肢3つ、正解、解説文、都道府県名
- エラー時は最大3回リトライ、それでも失敗したら「問題の生成に失敗しました。もう一度お試しください」を表示

#### トップ画面で実装する内容（要件定義書 §6.3 対応）

- ステップ1：ジャンルを選択 → [地理] [観光名所] [グルメ]
- ステップ2：難易度を選択 → [初級] [中級] [上級]
- ステップ3：スタートボタン表示 → [ゲームスタート！]
- 選び直しも可能（ジャンルをタップで再選択）
- 「回答履歴を見る」ボタンをトップ画面下部に配置

### 午後（13:00〜16:00）

| 時間 | 内容 | 形式 | 詳細 |
|------|------|------|------|
| 13:00〜14:30 | クイズ画面の実装 | Claude Code実装 | 出題→回答選択→確定→正誤判定→解説表示→次の問題への一連のフローを構築する |
| 14:30〜15:30 | 結果画面の実装 | Claude Code実装 | 正解数の表示、成績に応じたメッセージ、全問の振り返り一覧を構築する |
| 15:30〜16:00 | Day 2 チェック + 動作確認 | 自習 | チェックリストに沿って動作を確認する |

#### クイズ画面で実装する内容（要件定義書 §4.5 対応）

- 画面上部に進捗表示（「問題 3 / 5」）
- 選択肢をタップでハイライト → 「回答する」ボタンで確定
- 回答確定後に正解/不正解 + 解説を即座に表示
- 不正解の場合は正解の選択肢も表示
- 「次の問題へ」ボタンで次に進む（自動遷移しない）
- 5問目の回答後は「次の問題へ」が「結果を見る」に変わる
- クイズ生成中は「クイズを生成中です...」+ ローディングアニメーション

#### 結果画面で実装する内容（要件定義書 §6.4 対応）

- 5問中の正解数を大きく表示
- 正解数に応じたメッセージ：
  - 5問正解：「パーフェクト！日本マスターへの道を順調に進んでいます！」
  - 3〜4問：「いい調子です！もう少しで全問正解！」
  - 1〜2問：「次はもっと上を目指しましょう！」
  - 0問：「ドンマイ！挑戦することが大事です！」
- 全問の正解/不正解を一覧表示（折りたたみなし）
- 不正解の問題は解説を再表示
- 「同じ条件でもう一度」ボタン + 「トップに戻る」ボタン
- 広告表示スペースの確保

### Day 2 チェックリスト

#### フロー確認（開発サイクルが回っている）

- [ ] Day 2 で実装した各機能ごとにIssue → Branch → PR → Merge のサイクルを回せた
- [ ] コミットメッセージに `feat:` プレフィックスを付けている
- [ ] PRの本文にテンプレートの「動作確認」を記入した

#### 動作確認（クイズの一連のフローが動く）

- [ ] トップ画面でジャンル（地理/観光名所/グルメ）を選択できる
- [ ] ジャンル選択後に難易度（初級/中級/上級）を選択できる
- [ ] 難易度選択後に「ゲームスタート！」ボタンが表示される
- [ ] ゲーム開始時に「クイズを生成中です...」のローディングが表示される
- [ ] クイズ画面で5問出題される（進捗「問題 X / 5」が表示される）
- [ ] 選択肢をタップするとハイライトされ、「回答する」ボタンで確定できる
- [ ] 回答後に正解/不正解と解説が表示される
- [ ] 5問回答後に結果画面が表示される（正解数 + メッセージ + 全問振り返り）
- [ ] 「同じ条件でもう一度」で同じジャンル・難易度でクイズが再開できる
- [ ] 「トップに戻る」でトップ画面に戻れる

#### 理解確認（API設計の基礎）

- [ ] 「APIとは何か」を自分の言葉で説明できる（例：サーバーとクライアントがデータをやり取りする窓口）
- [ ] クイズ生成の流れを説明できる（例：フロントエンドがAPIにリクエスト → APIがClaude APIに問題生成を依頼 → JSON形式で5問分のデータが返る）

---

## Day 3: 仕上げる & 公開する

**テーマ：残りの画面を完成させ、全体を仕上げてデプロイする**

### 午前（9:00〜12:00）

| 時間 | 内容 | 形式 | 詳細 |
|------|------|------|------|
| 9:00〜9:15 | Day 2 振り返り | 講師説明 | Day 2 チェックリストの確認、質疑応答 |
| 9:15〜10:15 | 日本地図SVG + 色分けロジック | Claude Code実装 | トップ画面に日本地図を表示し、都道府県ごとの色付けロジックを実装する |
| 10:15〜11:15 | 回答履歴画面 + 達成状況画面 | Claude Code実装 | 過去の回答一覧とユーザーの達成度を表示する2画面を実装する |
| 11:15〜12:00 | 設定画面 + ナビゲーション | Claude Code実装 | 設定画面とヘッダー/ハンバーガーメニューを実装する |

#### 日本地図で実装する内容（要件定義書 §5 対応）

- SVG形式の日本地図をトップ画面に常時表示
- 47都道府県を個別に色制御
- 正解した都道府県に色がつく（未回答：グレー、初級正解：薄い緑、中級正解：緑、上級正解：深い緑）
- 同じ県で上の難易度に正解すると色が変化（上書き）
- 地図タップで達成状況画面へ遷移

#### 回答履歴画面で実装する内容（要件定義書 §6.5 対応）

- 過去のクイズ結果を新しい順に一覧表示（日付・ジャンル・難易度・正解数）
- 各回を折りたたみ式で展開 → 全問題と解説が見れる
- 1ページ10回分表示（ページネーション）

#### 達成状況画面で実装する内容（要件定義書 §6.6 対応）

- 日本地図（色付き）
- 都道府県制覇状況（47都道府県中○個クリア + 進捗バー）
- 難易度別の制覇数（初級: ○/47、中級: ○/47、上級: ○/47）
- 総回答数と全体正答率
- ジャンル別正答率（地理: ○%、観光名所: ○%、グルメ: ○%）

#### 設定画面で実装する内容（要件定義書 §6.7 対応）

- パスワード変更（現在のパスワード + 新しいパスワード）
- アカウント削除（確認ダイアログ「本当に削除しますか？」→ 全データ削除）

#### ナビゲーションで実装する内容（要件定義書 §7 対応）

- **PC版（768px以上）：** ヘッダーに [JapanMaster] [回答履歴] [達成状況] [設定] [ログアウト]
- **スマホ版（767px以下）：** ヘッダーに [JapanMaster] + ハンバーガーメニュー（≡）
- ログアウト時は確認ダイアログを表示

### 午後（13:00〜16:00）

| 時間 | 内容 | 形式 | 詳細 |
|------|------|------|------|
| 13:00〜13:30 | レスポンシブ対応 | Claude Code実装 | 全画面をPC・スマホ両対応にする。768pxで表示を切り替え |
| 13:30〜14:00 | エラー画面 + ローディング表示 | Claude Code実装 | 404/500/ネットワークエラー画面、AI利用制限表示、各種ローディング表示を実装する |
| 14:00〜14:45 | Vercelデプロイ + 最終動作確認 | 自習 | Vercelにデプロイし、環境変数を設定し、本番環境で動作を確認する |
| 14:45〜15:30 | 全機能の最終チェック | 自習 | Day 3 チェックリストに沿って全画面・全機能を通しで確認する |
| 15:30〜16:00 | 振り返り + 成果発表 | 講師進行 | 3日間の学びを振り返り、完成したアプリを発表する |

#### エラー画面・ローディングで実装する内容（要件定義書 §4.6, §4.7, §11 対応）

- **ローディング：** クイズ生成中（「クイズを生成中です...」+ アニメーション）、ページ遷移中（インジケーター）、データ取得中（スケルトン表示）
- **エラー画面：** 404（「ページが見つかりません」+ トップに戻るボタン）、500（「サーバーでエラーが発生しました」）、ネットワークエラー（「通信に失敗しました」）
- **AI利用制限：** 1日20回（100問）上限、到達時に「本日の利用上限に達しました。明日またお楽しみください」を表示
- **クイズ中の離脱：** ブラウザを閉じた/戻るボタン → 途中データは破棄

### Day 3 チェックリスト（最終確認）

#### フロー確認（全PRがマージされている）

- [ ] 3日間で作成した全PRがmainブランチにマージされている
- [ ] 対応する全Issueがcloseされている
- [ ] mainブランチでビルドが通る（`npm run build` がエラーなく完了する）

#### 動作確認 — 認証（Day 1 で作った機能の再確認）

- [ ] ログイン画面が正しく表示される
- [ ] 新規登録 → 確認メール → ログインの流れが動く
- [ ] パスワードリセットが機能する
- [ ] ログアウト時に確認ダイアログが表示され、「はい」でログイン画面に戻る

#### 動作確認 — クイズフロー（Day 2 で作った機能の再確認）

- [ ] トップ画面でジャンル → 難易度 → スタートの順に選択できる
- [ ] クイズ画面で5問が出題され、1問ずつ回答 → 正誤 → 解説のフローが動く
- [ ] 結果画面に正解数・メッセージ・全問振り返りが表示される

#### 動作確認 — 地図・達成・履歴（Day 3 で作った機能）

- [ ] トップ画面に日本地図が表示されている
- [ ] クイズに正解した都道府県の地図の色が変わる
- [ ] 難易度によって地図の色が異なる（グレー → 薄い緑 → 緑 → 深い緑）
- [ ] 地図をタップすると達成状況画面に遷移する
- [ ] 達成状況画面に制覇率・難易度別進捗・正答率・ジャンル別正答率が表示される
- [ ] 回答履歴画面に過去のクイズ結果が新しい順に表示される
- [ ] 回答履歴の各回を折りたたみで展開すると全問題と解説が見れる
- [ ] 回答履歴にページネーションがある（10件ごと）

#### 動作確認 — 設定・ナビゲーション

- [ ] 設定画面でパスワード変更ができる
- [ ] 設定画面でアカウント削除ができる（確認ダイアログあり）
- [ ] PC表示でヘッダーに [回答履歴] [達成状況] [設定] [ログアウト] が並ぶ
- [ ] スマホ表示でハンバーガーメニューからナビゲーションできる

#### 動作確認 — エラー・ローディング・レスポンシブ

- [ ] 存在しないURLにアクセスすると404画面が表示される
- [ ] クイズ生成中にローディング表示が出る
- [ ] AI利用上限（1日20回）に達すると制限メッセージが表示される
- [ ] PC（768px以上）とスマホ（767px以下）でレイアウトが切り替わる

#### デプロイ確認

- [ ] Vercelにデプロイされている
- [ ] デプロイされたURL（xxx.vercel.app）にアクセスしてアプリが動作する
- [ ] 環境変数（Supabase接続情報・Claude APIキー）がVercelに設定されている

---

## 要件定義書との対応表

すべての要件がDay 1〜3のいずれかでカバーされていることを確認する表です。

| 要件定義書の章 | 内容 | 実装するDay |
|---------------|------|------------|
| §2 技術スタック | Next.js / Supabase / Claude API / Vitest / ESLint | Day 1（環境構築） |
| §3 ユーザー認証 | メール&PW / Google / パスワードリセット / メール確認 | Day 1 午後 |
| §4.1〜4.4 クイズ基本仕様・生成ロジック | 5問3択、ジャンル3種、難易度3段階、都道府県紐づけ | Day 2 午前 |
| §4.5 クイズ中の体験 | 進捗表示、正誤判定、解説、次の問題ボタン | Day 2 午後 |
| §4.6 AI利用制限 | 1日20回上限、リセット | Day 3 午後 |
| §4.7 AI生成エラー処理 | リトライ3回、失敗メッセージ | Day 2 午前 |
| §5 日本地図 | SVG、色付け、タップで遷移 | Day 3 午前 |
| §6.1 画面一覧（全9画面） | — | Day 1〜3で網羅 |
| §6.2 ログイン画面・新規登録画面 | フォーム、バリデーション、確認メール | Day 1 午後 |
| §6.3 トップ画面 | ジャンル→難易度→スタートのステップUI | Day 2 午前 |
| §6.4 結果画面 | 正解数、メッセージ、振り返り、広告スペース | Day 2 午後 |
| §6.5 回答履歴画面 | 一覧、折りたたみ、ページネーション | Day 3 午前 |
| §6.6 達成状況画面 | 地図、制覇率、難易度別、正答率 | Day 3 午前 |
| §6.7 設定画面 | パスワード変更、アカウント削除 | Day 3 午前 |
| §7 ナビゲーション | ヘッダー（PC）、ハンバーガー（スマホ）、ログアウト | Day 3 午前 |
| §8 広告 | 広告スペースの確保（下部固定バナー、結果画面） | Day 2 午後（結果画面）+ Day 3 午後（全体調整） |
| §9 データベース設計 | 5テーブル | Day 1 午後 |
| §10 セキュリティ | PW条件、ログイン制限、セッション有効期限 | Day 1 午後 |
| §11 ローディング・エラー画面 | ローディング、404/500/ネットワークエラー、離脱処理 | Day 3 午後 |
| §12 プライバシーポリシー・利用規約 | ポリシーページ、同意チェック | Day 1 午後（同意チェック）+ Day 3 午後（ページ作成） |
| §13 デプロイ | Vercel、環境変数 | Day 3 午後 |

---

## 講師向けメモ

### 研修のポイント

- **手を動かす時間を最大化する。** 講師説明は各Day合計1時間以内に収め、残りは自習＋Claude Code実装の時間とする
- **完璧を求めない。** Draft PRを早めに出す文化を徹底する。動くものを見せてからブラッシュアップする
- **開発サイクルの反復を重視する。** 機能ごとに Issue → Branch → PR → Merge を繰り返すことで、フローを体に染み込ませる
- **Logic Gate は受講者の自走力を育てる。** LLM に頼らず自分で考える体験が、その後の Claude Code 活用をより効果的にする

### つまずきやすいポイントと対処法

| つまずきポイント | 対処法 |
|----------------|--------|
| Gitの操作に慣れていない | 最初の数回は講師が画面を見せながら一緒に操作する。コマンドを手順書としてまとめておく |
| Issueの書き方がわからない | 最初のIssueは講師が一緒に書く。2つ目以降は受講者に任せる |
| Claude Codeへの指示が漠然としている | 要件定義書の該当セクションを読んでから指示するよう促す。「何を作るか」が明確でないとAIも良い出力を返せないことを伝える |
| エラーが出て先に進めない | まずエラーメッセージを読む習慣をつける。Claude Codeにエラーを伝えて解決を依頼する流れを練習する |
| 時間が足りない | 各セッションの優先順位を決めておき、「最低限ここまで」のラインを講師が把握しておく |

### 時間調整の目安

研修は受講者のペースに応じて柔軟に調整してください。

- **進みが早い場合：** 広告スペースの実装、プライバシーポリシー/利用規約ページの充実、UIの細かい調整に時間を使う
- **進みが遅い場合：** Day 3 午前の「レスポンシブ対応」「エラー画面」は最小限にし、コア機能（地図・履歴・設定）の完成を優先する。デプロイは講師がサポートして確実に完了させる
